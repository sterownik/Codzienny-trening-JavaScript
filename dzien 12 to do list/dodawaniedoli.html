<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <input type="text">
    <button class="add">Add task</button>
    <h1>Liczba zadan <span></span></h1>
    <ul>

    </ul>
    <script>
        const toDoList = [];
        var addbtn = document.querySelector(".add");
        var inn = document.querySelector("input");
        var spanik = document.querySelector("span");
        var ull = document.querySelector("ul");

        var i = 0;

        var listItems = document.querySelectorAll("li task");

        spanik.textContent = i;
        const removeTask = (e) => {
            e.target.parentNode.remove();
            const liczba = document.querySelectorAll("li").length;
            spanik.textContent = liczba;
            const index = e.target.parentNode.id;
            console.log(index);

            toDoList.splice(index, 1);
            // usuwanie z tablicy pom indeksie i ile
            ull.textContent = "";
            toDoList.forEach((task1, index) => {
                task1.id = index;
                ull.appendChild(task1);

            })
        }



        const dodaj = () => {
            if (inn.value != "") {
                var task = document.createElement("li");
                task.className = 'task';
                var btn = document.createElement("button");
                btn.appendChild(document.createTextNode("UsuÅ„"));
                task.appendChild(document.createTextNode(inn.value));
                task.appendChild(btn);
                // ull.appendChild(task);
                toDoList.push(task);
                ull.textContent = "";
                toDoList.forEach((task1, index) => {
                    task1.id = index;
                    ull.appendChild(task1);

                })
                inn.value = "";

                const liczba = document.querySelectorAll("li").length;
                spanik.textContent = liczba;
                task.querySelector("button").addEventListener("click", removeTask);
                // szukamy buttona w tasku moze byc
                // document.querySelector("li:last-child button").addEventListener("click", removeTask); szuka ostatniego i tam ma dodac sluchacza
            }

        }
        var lie = document.getElementsByClassName("task");
        //na zywo getElementByClassname






        addbtn.addEventListener("click", dodaj);
    </script>
</body>

</html>