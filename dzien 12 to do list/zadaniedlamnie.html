<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <input class="wpisz" type="text">
    <button class="add">Dodaj</button>
    <input class="szukaj" type="text">
    <h1>Masz <span></span> task√≥w</h1>
    <ul></ul>
    <script>
        var wszystkieli = [];
        var taskinput = document.querySelector(".wpisz");
        var dodajtask = document.querySelector("button.add");
        var szukajinput = document.querySelector(".szukaj");
        var spanik = document.querySelector("span");
        var ull = document.querySelector("ul");

        const remove = (e) => {
            const index = e.target.parentNode.id;
            wszystkieli.splice(index, 1);
            // usuwanie elementu o indexie
            ull.textContent = "";

            wszystkieli.forEach((task1, index) => {
                task1.id = index;
                ull.appendChild(task1);
            })
            //od nowa nadajemy indexy

            var lb = document.getElementsByClassName("task").length;
            spanik.textContent = lb;
        }
        const dodaj = () => {
            if (taskinput.value != "") {

                var task = document.createElement("li");
                task.className = "task";
                var button = document.createElement("button");
                button.appendChild(document.createTextNode("usun"));
                task.appendChild(document.createTextNode(taskinput.value));
                task.appendChild(button);
                ull.appendChild(task);
                task.querySelector("button").addEventListener("click", remove);
                var lb = document.getElementsByClassName("task").length;
                spanik.textContent = lb;
                taskinput.value = "";
                wszystkieli.push(task);
                ull.textContent = "";

                wszystkieli.forEach((task1, index) => {
                    task1.id = index;
                    ull.appendChild(task1);

                })
                //nadajemy indexy



            }
        }
        //funkcja do szukania
        const fun = (e) => {
            ull.textContent = "";
            console.log(wszystkieli);
            var searchtext = e.target.value.toLowerCase();

            wszystkieli.forEach((task1, index) => {
                if (task1.textContent.includes(searchtext)) {
                    task1.id = index;
                    ull.appendChild(task1);
                }
                //szukanie czy text zawiera


            })
        }
        szukajinput.addEventListener("input", fun);

        dodajtask.addEventListener("click", dodaj);
    </script>
</body>

</html>